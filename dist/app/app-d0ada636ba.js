!function(){"use strict";function e(e,n,t,i){i.caseInsensitive(!0),i.strictMode(!1),n.state("landing",{url:"/main",templateUrl:"app/landing/landing.html",controller:"LandingCtrl",controllerAs:"vm",onExit:function(){window.tak.headhesive&&window.tak.headhesive.destroy()}}).state("rsvp-code",{url:"/rsvp-code",templateUrl:"app/rsvp-code/rsvp-code.html",controller:"RSVPCodeCtrl",controllerAs:"vm"}).state("rsvp",{url:"/rsvp/:code",templateUrl:"app/rsvp/rsvp.html",controller:"RSVPCtrl",controllerAs:"vm",resolve:{rsvpData:["RSVPFactory","$stateParams",function(e,n){return n.code===e.key?e:e.getData(n.code)}]}}),t.otherwise("/main"),"localhost"!=window.location.host.split(":")[0]&&e.debugInfoEnabled(!1)}angular.module("sophiaAndRichard",["ui.router","ngAnimate","ui.bootstrap","ngTouch"]).config(["$compileProvider","$stateProvider","$urlRouterProvider","$urlMatcherFactoryProvider",e])}(),function(e,n){"use strict";function t(e,t,i,a){function o(){a.open({animation:!0,templateUrl:"app/landing/room-block-modal.html",controller:"RoomBlockModalCtrl",controllerAs:"vm",size:"lg"})}function r(e){l(e,[{id:0,image:"images/thumbnail-strip/0003-lrg.jpg"},{id:1,image:"images/thumbnail-strip/0020-lrg.jpg"},{id:2,image:"images/thumbnail-strip/0039-lrg.jpg"},{id:3,image:"images/thumbnail-strip/0051-lrg.jpg"},{id:4,image:"images/thumbnail-strip/0116-lrg.jpg"},{id:5,image:"images/thumbnail-strip/0147-lrg.jpg"}])}function s(e){l(e,[{id:0,image:"images/engagement/_REN1339-Edit-lrg.jpg"},{id:1,image:"images/engagement/_REN1369-Edit-lrg.jpg"},{id:2,image:"images/engagement/_REN1656-lrg.jpg"},{id:3,image:"images/engagement/_REN1690-Edit-lrg.jpg"},{id:4,image:"images/engagement/_REN1708-Edit-lrg.jpg"},{id:5,image:"images/engagement/_REN1722-Edit-lrg.jpg"},{id:6,image:"images/engagement/_REN1788-lrg.jpg"},{id:7,image:"images/engagement/_REN1800-lrg.jpg"},{id:8,image:"images/engagement/_REN1853-Edit-lrg.jpg"}])}function l(e,n){a.open({animation:!0,templateUrl:"app/landing/gallery-modal.html",controller:"GalleryModalCtrl",controllerAs:"vm",size:"lg",resolve:{startIdx:function(){return e},images:function(){return n}}})}var d=this,c=function(){var e=$(".how-it-works-li"),n=void 0;e.each(function(){var e=$(this);(!n||e.outerHeight()>n)&&(n=e.outerHeight())}),e.each(function(){var e=$(this);e.outerHeight()!==n&&e.css("min-height",n+"px")})};d.mapsApiFailed=!1,d.openEdytaGallery=r,d.openRenGallery=s,d.openRoomBlockModal=o,e.$on("$viewContentLoaded",function(){n.tak.runUripV2(),t.mapsInitialized.then(function(){var n=new google.maps.DirectionsRenderer,t=new google.maps.DirectionsService;i(function(){var i=document.getElementById("googleMap"),a=new google.maps.Map(i,{center:{lat:36.115662,lng:-115.170364},zoom:12,scrollwheel:!1});n.setMap(a),n.setPanel(document.getElementById("right-panel")),t.route({origin:"3555 S Las Vegas Blvd, Las Vegas, NV 89109",destination:"8310 S Rainbow Blvd #100, Las Vegas, NV 89139",travelMode:"DRIVING"},function(t,i){"OK"===i?n.setDirections(t):e.$apply(d.mapsApiFailed=!0)})})}),c()}),$(n).resize(c)}t.$inject=["$scope","GoogleMapInit","$timeout","$uibModal"],e.module("sophiaAndRichard").controller("LandingCtrl",t)}(angular,window),function(){"use strict";function e(e,n){function t(e){a.invalidCode&&e!==a.invalidCode&&(a.invalidCode=null)}function i(t){a.isBusy=!0,e.getData(t.code).then(function(){n.go("rsvp",{code:t.code})}).catch(function(){a.invalidCode=t.code}).then(function(){a.isBusy=!1})}var a=this;a.form={},a.formModel={code:""},a.submit=i,a.isBusy=!1,a.invalidCode=null,a.codeWatcher=t}e.$inject=["RSVPFactory","$state"],angular.module("sophiaAndRichard").controller("RSVPCodeCtrl",e)}(),function(){"use strict";function e(e,n){function t(){n.initialized.then(function(){n.setCalendarEvent().then(function(){s.calendarEventAdded=!0})})}function i(e){e.plusOneDependent&&(s.mainNotGoing="0"===e.going)}function a(e,n){var t=e+n;return s.form[t].$dirty&&s.form[t].$invalid}function o(e){$("#"+e+"-notification").removeClass("show-up"),s.showCloseButton=!0}function r(n){s.isSaving=!0,e.save(n).then(function(){s.showThankYou=!0,s.atLeastOneGoing=!1,angular.forEach(n,function(e,n){"responded"!==n&&("1"!==e.going||s.mainNotGoing||(s.atLeastOneGoing=!0))}),s.form.$setPristine()}).catch(function(){$("#error-notification").addClass("show-up"),s.showCloseButton=!1}).then(function(){s.isSaving=!1})}var s=this;s.formModel=e.data,s.form={},s.isSaving=!1,s.submit=r,s.closeToast=o,s.showErrors=a,s.showCloseButton=!0,s.goingChanged=i,s.mainNotGoing=!1,angular.forEach(s.formModel,function(e,n){"responded"!==n&&s.goingChanged(e)}),s.showThankYou=!1,s.authCalendar=t,s.atLeastOneGoing=void 0,s.calendarEventAdded=!1}e.$inject=["rsvpData","GoogleCalendar"],angular.module("sophiaAndRichard").controller("RSVPCtrl",e)}(),function(e){"use strict";function n(e,n){function t(t){var i=this;return e(function(e,a){n.database.ref("codes/"+t).on("value",function(n){i.data=n.val(),i.data?(i.key=n.key,e(i)):a(null)})})}function i(t){var i=this;return t.responded=!0,e(function(e,a){n.database.ref("codes/"+i.key).set(t).then(e).catch(a)})}return{data:null,key:null,getData:t,save:i}}n.$inject=["$q","FirebaseFactory"],angular.module("sophiaAndRichard").factory("RSVPFactory",n)}(firebase),function(){"use strict";function e(){return{database:firebase.database()}}angular.module("sophiaAndRichard").factory("FirebaseFactory",e)}(),function(){"use strict";function e(e,n){var t=e.defer();return n.googleMapsInitialized=function(){t.resolve()},function(e,n){var t=document.createElement("script");t.src=e+n,document.body.appendChild(t)}("https://maps.googleapis.com/maps/api/js?key=AIzaSyDn4kt1AKRUYUuFG76W4motG74HPFClEuw&callback=","googleMapsInitialized"),{mapsInitialized:t.promise}}e.$inject=["$q","$window"],angular.module("sophiaAndRichard").factory("GoogleMapInit",e)}(),function(){"use strict";function e(){return{restrict:"A",require:"?ngModel",link:function(e,n,t,i){i.$parsers.unshift(function(e){return n.val(e.toUpperCase()),e.toUpperCase()})}}}angular.module("sophiaAndRichard").directive("inputUppercase",e)}(),function(){"use strict";function e(){return function(e){return delete e.responded,e}}angular.module("sophiaAndRichard").filter("respondedFilter",e)}(),function(){"use strict";function e(e,n){var t="194227013541-5qbqe4dgvvvfrncs40jgkvsh512hm6u1.apps.googleusercontent.com",i=["https://www.googleapis.com/auth/calendar"],a=this,o=e.defer(),r=document.createElement("script"),s=!1;a.initialized=o.promise,a.setCalendarEvent=function(){var n=e.defer(),a=function(){var e="Tiffany and Kelvin Wedding";gapi.client.calendar.events.list({calendarId:"primary",timeMin:"2016-12-18T00:00:00Z",timeMax:"2016-12-19T00:00:00Z",showDeleted:!1,singleEvents:!0,q:e}).then(function(t){for(var i=t.result.items,a=!1,o=0;o<i.length;o++)if(i[o].summary===e){a=!0;break}if(!a){var r={summary:e,location:"3555 S Las Vegas Blvd, Las Vegas, NV 89109",description:"Tiffany and Kelvin are getting married.",guestsCanInviteOthers:!1,start:{dateTime:"2016-12-18T15:00:00",timeZone:"America/Los_Angeles"},end:{dateTime:"2016-12-19T00:00:00",timeZone:"America/Los_Angeles"},reminders:{useDefault:!1,overrides:[{method:"email",minutes:10080},{method:"popup",minutes:1440}]}};return gapi.client.calendar.events.insert({calendarId:"primary",resource:r})}n.resolve()}).then(function(){n.resolve()})};return s?gapi.client.load("calendar","v3").then(a):gapi.auth.authorize({client_id:t,scope:i,immediate:!1}).then(function(){return gapi.client.load("calendar","v3")},function(){n.reject("denied")}).then(a),n.promise},n.gapiInitialized=function(){gapi.auth.authorize({client_id:t,scope:i.join(" "),immediate:!0},function(e){s=e&&!e.error,o.resolve()})},r.src="https://apis.google.com/js/client.js?onload=gapiInitialized",document.body.appendChild(r)}e.$inject=["$q","$window"],angular.module("sophiaAndRichard").service("GoogleCalendar",e)}(),function(){"use strict";function e(e,n,t,i){function a(e){var n=r.startIdx;"right"===e?n-1>-1&&(r.startIdx+=-1):n+1<r.images.length&&(r.startIdx+=1)}function o(){e.close()}var r=this;r.images=t,r.startIdx=n,r.close=o,r.swipe=a,i(function(){$(".carousel-indicators").remove()})}e.$inject=["$uibModalInstance","startIdx","images","$timeout"],angular.module("sophiaAndRichard").controller("GalleryModalCtrl",e)}(),function(){"use strict";function e(){return{restrict:"A",link:function(e,n){n[0].tabIndex=1e3;var t=function(n,t,i){if(e.testing)return n;var a;return function(){var e=this,o=arguments,r=function(){a=null,i||n.apply(e,o)},s=i&&!a;clearTimeout(a),a=setTimeout(r,t),s&&n.apply(e,o)}}(function(n){39===n.keyCode?(n.preventDefault(),e.vm.images.length>e.vm.startIdx+1&&e.$apply(e.vm.startIdx+=1)):37===n.keyCode&&(n.preventDefault(),-1<e.vm.startIdx-1&&e.$apply(e.vm.startIdx+=-1))},400);n[0].addEventListener("keydown",t)}}}angular.module("sophiaAndRichard").directive("keyboardControls",e)}(),function(){"use strict";function e(e){function n(){e.close()}this.close=n}e.$inject=["$uibModalInstance"],angular.module("sophiaAndRichard").controller("RoomBlockModalCtrl",e)}();