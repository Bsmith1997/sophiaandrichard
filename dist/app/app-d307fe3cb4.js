!function(){"use strict";function e(e,t,n,i){i.caseInsensitive(!0),i.strictMode(!1),t.state("landing",{url:"/main",templateUrl:"app/landing/landing.html",controller:"LandingCtrl",controllerAs:"vm",onExit:function(){window.tak.headhesive&&window.tak.headhesive.destroy()}}).state("rsvp-code",{url:"/rsvp-code",templateUrl:"app/rsvp-code/rsvp-code.html",controller:"RSVPCodeCtrl",controllerAs:"vm"}).state("rsvp",{url:"/rsvp/:code",templateUrl:"app/rsvp/rsvp.html",controller:"RSVPCtrl",controllerAs:"vm",resolve:{rsvpData:["RSVPFactory","$stateParams",function(e,t){return t.code===e.key?e:e.getData(t.code)}]}}),n.otherwise("/main"),"localhost"!=window.location.host.split(":")[0]&&e.debugInfoEnabled(!1)}angular.module("sophiaAndRichard",["ui.router","ngAnimate","ui.bootstrap","ngTouch"]).config(["$compileProvider","$stateProvider","$urlRouterProvider","$urlMatcherFactoryProvider",e])}(),function(e,t){"use strict";function n(e,n,i,o){function a(){o.open({animation:!0,templateUrl:"app/landing/room-block-modal.html",controller:"RoomBlockModalCtrl",controllerAs:"vm",size:"lg"})}function r(e){l(e,[{id:0,image:"images/thumbnail-strip/0003-lrg.jpg"},{id:1,image:"images/thumbnail-strip/0020-lrg.jpg"},{id:2,image:"images/thumbnail-strip/0039-lrg.jpg"},{id:3,image:"images/thumbnail-strip/0051-lrg.jpg"},{id:4,image:"images/thumbnail-strip/0116-lrg.jpg"},{id:5,image:"images/thumbnail-strip/0147-lrg.jpg"}])}function s(e){l(e,[{id:0,image:"images/engagement/_REN1339-Edit-lrg.jpg"},{id:1,image:"images/engagement/_REN1369-Edit-lrg.jpg"},{id:2,image:"images/engagement/_REN1656-lrg.jpg"},{id:3,image:"images/engagement/_REN1690-Edit-lrg.jpg"},{id:4,image:"images/engagement/_REN1708-Edit-lrg.jpg"},{id:5,image:"images/engagement/_REN1722-Edit-lrg.jpg"},{id:6,image:"images/engagement/_REN1788-lrg.jpg"},{id:7,image:"images/engagement/_REN1800-lrg.jpg"},{id:8,image:"images/engagement/_REN1853-Edit-lrg.jpg"}])}function l(e,t){o.open({animation:!0,templateUrl:"app/landing/gallery-modal.html",controller:"GalleryModalCtrl",controllerAs:"vm",size:"lg",resolve:{startIdx:function(){return e},images:function(){return t}}})}var c=this,d=function(){var e=$(".how-it-works-li"),t=void 0;e.each(function(){var e=$(this);(!t||e.outerHeight()>t)&&(t=e.outerHeight())}),e.each(function(){var e=$(this);e.outerHeight()!==t&&e.css("min-height",t+"px")})};c.mapsApiFailed=!1,c.openEdytaGallery=r,c.openRenGallery=s,c.openRoomBlockModal=a,e.$on("$viewContentLoaded",function(){t.tak.runUripV2(),n.mapsInitialized.then(function(){var t=new google.maps.DirectionsRenderer,n=new google.maps.DirectionsService;i(function(){var i=document.getElementById("googleMap"),o=new google.maps.Map(i,{center:{lat:36.115662,lng:-115.170364},zoom:12,scrollwheel:!1});t.setMap(o),t.setPanel(document.getElementById("right-panel")),n.route({origin:"3555 S Las Vegas Blvd, Las Vegas, NV 89109",destination:"8310 S Rainbow Blvd #100, Las Vegas, NV 89139",travelMode:"DRIVING"},function(n,i){"OK"===i?t.setDirections(n):e.$apply(c.mapsApiFailed=!0)})})}),d()}),$(t).resize(d)}n.$inject=["$scope","GoogleMapInit","$timeout","$uibModal"],e.module("sophiaAndRichard").controller("LandingCtrl",n)}(angular,window),function(){"use strict";function e(e){var t={};return t.getData=function(t){return e.collection("rsvps").doc(t).get()},t}angular.module("sophiaAndRichard").factory("RSVPFactory",e),e.$inject=["FirestoreFactory"]}(),function(){"use strict";function e(e,t,n){function i(e){a.invalidCode&&e!==a.invalidCode&&(a.invalidCode=null)}function o(e){a.isBusy=!0,n.collection("rsvps").doc(e.code).get().then(function(n){n.exists?t.go("rsvp",{code:e.code}):a.invalidCode=e.code}).catch(function(t){console.error("Error fetching RSVP code: ",t),a.invalidCode=e.code}).finally(function(){a.isBusy=!1})}var a=this;a.form={},a.formModel={code:""},a.submit=o,a.isBusy=!1,a.invalidCode=null,a.codeWatcher=i}angular.module("sophiaAndRichard").controller("RSVPCodeCtrl",e),e.$inject=["RSVPFactory","$state","FirestoreFactory"]}(),function(){"use strict";function e(e,t){function n(){t.initialized.then(function(){t.setCalendarEvent().then(function(){s.calendarEventAdded=!0})})}function i(e){e.plusOneDependent&&(s.mainNotGoing="0"===e.going)}function o(e,t){var n=e+t;return s.form[n].$dirty&&s.form[n].$invalid}function a(e){$("#"+e+"-notification").removeClass("show-up"),s.showCloseButton=!0}function r(t){s.isSaving=!0,e.save(t).then(function(){s.showThankYou=!0,s.atLeastOneGoing=!1,angular.forEach(t,function(e,t){"responded"!==t&&("1"!==e.going||s.mainNotGoing||(s.atLeastOneGoing=!0))}),s.form.$setPristine()}).catch(function(){$("#error-notification").addClass("show-up"),s.showCloseButton=!1}).then(function(){s.isSaving=!1})}var s=this;s.formModel=e.data,s.form={},s.isSaving=!1,s.submit=r,s.closeToast=a,s.showErrors=o,s.showCloseButton=!0,s.goingChanged=i,s.mainNotGoing=!1,angular.forEach(s.formModel,function(e,t){"responded"!==t&&s.goingChanged(e)}),s.showThankYou=!1,s.authCalendar=n,s.atLeastOneGoing=void 0,s.calendarEventAdded=!1}e.$inject=["rsvpData","GoogleCalendar"],angular.module("sophiaAndRichard").controller("RSVPCtrl",e)}(),function(e){"use strict";function t(e,t){function n(n){var i=this;return e(function(e,o){t.firestore.collection("codes").doc(n).get().then(function(t){t.exists?(i.data=t.data(),i.key=t.id,e(i)):o(null)}).catch(o)})}function i(n){var i=this;return n.responded=!0,e(function(e,o){t.firestore.collection("codes").doc(i.key).set(n).then(e).catch(o)})}return{data:null,key:null,getData:n,save:i}}t.$inject=["$q","FirebaseFactory"],angular.module("sophiaAndRichard").factory("RSVPFactory",t)}(firebase),function(){"use strict";angular.module("sophiaAndRichard").factory("FirebaseFactory",FirebaseFactory),FirebaseFactory.$inject=["$q"],firebase.firestore()}(),function(){"use strict";function e(e,t){var n=e.defer();return t.googleMapsInitialized=function(){n.resolve()},function(e,t){var n=document.createElement("script");n.src=e+t,document.body.appendChild(n)}("https://maps.googleapis.com/maps/api/js?key=AIzaSyDn4kt1AKRUYUuFG76W4motG74HPFClEuw&callback=","googleMapsInitialized"),{mapsInitialized:n.promise}}e.$inject=["$q","$window"],angular.module("sophiaAndRichard").factory("GoogleMapInit",e)}(),function(){"use strict";function e(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,i){i.$parsers.unshift(function(e){return t.val(e.toUpperCase()),e.toUpperCase()})}}}angular.module("sophiaAndRichard").directive("inputUppercase",e)}(),function(){"use strict";function e(){return function(e){return delete e.responded,e}}angular.module("sophiaAndRichard").filter("respondedFilter",e)}(),function(){"use strict";function e(e,t){var n="194227013541-5qbqe4dgvvvfrncs40jgkvsh512hm6u1.apps.googleusercontent.com",i=["https://www.googleapis.com/auth/calendar"],o=this,a=e.defer(),r=document.createElement("script"),s=!1;o.initialized=a.promise,o.setCalendarEvent=function(){var t=e.defer(),o=function(){var e="Tiffany and Kelvin Wedding";gapi.client.calendar.events.list({calendarId:"primary",timeMin:"2016-12-18T00:00:00Z",timeMax:"2016-12-19T00:00:00Z",showDeleted:!1,singleEvents:!0,q:e}).then(function(n){for(var i=n.result.items,o=!1,a=0;a<i.length;a++)if(i[a].summary===e){o=!0;break}if(!o){var r={summary:e,location:"3555 S Las Vegas Blvd, Las Vegas, NV 89109",description:"Tiffany and Kelvin are getting married.",guestsCanInviteOthers:!1,start:{dateTime:"2016-12-18T15:00:00",timeZone:"America/Los_Angeles"},end:{dateTime:"2016-12-19T00:00:00",timeZone:"America/Los_Angeles"},reminders:{useDefault:!1,overrides:[{method:"email",minutes:10080},{method:"popup",minutes:1440}]}};return gapi.client.calendar.events.insert({calendarId:"primary",resource:r})}t.resolve()}).then(function(){t.resolve()})};return s?gapi.client.load("calendar","v3").then(o):gapi.auth.authorize({client_id:n,scope:i,immediate:!1}).then(function(){return gapi.client.load("calendar","v3")},function(){t.reject("denied")}).then(o),t.promise},t.gapiInitialized=function(){gapi.auth.authorize({client_id:n,scope:i.join(" "),immediate:!0},function(e){s=e&&!e.error,a.resolve()})},r.src="https://apis.google.com/js/client.js?onload=gapiInitialized",document.body.appendChild(r)}e.$inject=["$q","$window"],angular.module("sophiaAndRichard").service("GoogleCalendar",e)}(),function(){"use strict";function e(e,t,n,i){function o(e){var t=r.startIdx;"right"===e?t-1>-1&&(r.startIdx+=-1):t+1<r.images.length&&(r.startIdx+=1)}function a(){e.close()}var r=this;r.images=n,r.startIdx=t,r.close=a,r.swipe=o,i(function(){$(".carousel-indicators").remove()})}e.$inject=["$uibModalInstance","startIdx","images","$timeout"],angular.module("sophiaAndRichard").controller("GalleryModalCtrl",e)}(),function(){"use strict";function e(){return{restrict:"A",link:function(e,t){t[0].tabIndex=1e3;var n=function(t,n,i){if(e.testing)return t;var o;return function(){var e=this,a=arguments,r=function(){o=null,i||t.apply(e,a)},s=i&&!o;clearTimeout(o),o=setTimeout(r,n),s&&t.apply(e,a)}}(function(t){39===t.keyCode?(t.preventDefault(),e.vm.images.length>e.vm.startIdx+1&&e.$apply(e.vm.startIdx+=1)):37===t.keyCode&&(t.preventDefault(),-1<e.vm.startIdx-1&&e.$apply(e.vm.startIdx+=-1))},400);t[0].addEventListener("keydown",n)}}}angular.module("sophiaAndRichard").directive("keyboardControls",e)}(),function(){"use strict";function e(e){function t(){e.close()}this.close=t}e.$inject=["$uibModalInstance"],angular.module("sophiaAndRichard").controller("RoomBlockModalCtrl",e)}();